# Hubitat Somfy MyLink Integration

Device integration for Somfy devices via a MyLink hub.

## Devices

* Hub
* Shade

## Installation

[Hubitat Package Manager](https://github.com/dcmeglio/hubitat-packagemanager) is the recommended installation method.

Install this package using the "From a URL" install option.

```
https://raw.githubusercontent.com/defunctzombie/hubitat-somfy-mylink/master/packageManifest.json
```

<details><Summary>More Info</Summary>

1. Navigate to the Hubitat Package Manager App.

1. Click on "Install"
1. Click on "From a URL"
![From A URL](docs/FromAUrl.png)
1. On the next screen, enter the following url:
![Enter Url](docs/EnterUrl.png)
`
https://raw.githubusercontent.com/defunctzombie/hubitat-somfy-mylink/master/packageManifest.json
`
1. Click `next`

</details>

## Setup

Prior to adding your MyLink to Hubitat you should install the Somfy MyLink mobile app, configure it with your MyLink device, and add any shades.

Proceed to the next steps only after confirming you can control your shades with the MyLink mobile app.

<details>
<summary>More Info</summary>

These steps are broken into three parts. Integration report, add the Mylink to Hubitat device, and shade configuration.

### Integration Report

The integration report is generated by the Somfy MyLink mobile app. It contains information you need to later configure the MyLink within Hubitat.

1. Open the MyLink mobile app
1. Open the `Integration` page (found within the hamburger menu)
1. Select `Control 4`
1. If "Current System ID" is _not set_, select `Change System ID` and pick any word or phrase. Think of this as a sort of passphrase.
1. Select `Get Integration Report`
1. Keep your phone handy for the next section or click `send` to email yourself a copy.

### Add MyLink to Hubitat

1. Navigate to the _Devices_ page within your hub web interface.
1. Click `Add Virtual Device`
1. Enter a device name. Any name you wish to use for identifying this device within hubitat.
1. Under _Type_ select "Somfy MyLink Hub"
1. Click `Save`.

Additional configuration fields will appear. Fill these in with the values from your configuration report.

The _Device ## ID_ corresponds to the alphanumeric _Target_ in the integration report. The _Device ## Name_ can be anything to identify the device within hubitat.

Click `Save Preferences`. Then Click `Create Child Devices`

### Shade Configuration

1. Navigate to your device list within the hubitat web interface.
1. Under your MyLink hub you should see all your shades.
1. Click on any shade device under the MyLink hub.
1. Adjust the _Time (in seconds) for blind to open_ to how long it takes for your shade to go from open to closed.
1. Toggle _Bottom-up_ if your shade opens/closes from bottom-to-top.
1. Click `Save Preferences`.
1. Test your shade with the `Open` and `Close` buttons.

You're all set! Enjoy!!
</details>

## Prior Art

This work continues from the integration support in these repos:

* https://github.com/scelfo/hubitat-somfy-mylink
* https://github.com/bendews/smartthings-somfy-mylink
